jQuery(function (e) {
  let n = !1;
  function t(t) {
    if ((e("body").unblock(), n)) return (n = !1), !0;
    let a = e("form#payment-form, form#order_review"),
      i = a.find("input.bani_txnref"),
      r = a.find("input.bani_txnstatus"),
      u = a.find("input.bani_txntype");
    i.val(""), r.val(""), u.val("");
    let o = Number(wc_bani_params.amount);
    o /= 100;
    let l,
      s = function (t) {
        l = t?.reference || "";
        let i = t?.status || "",
          r = t?.type || "",
          u = t?.external_ref || "";
        if (
          (a.append(
            `<input  type="hidden" class="bani_txnref" name="bani_txnref" value= ${l}/>`
          ),
          a.append(
            `<input  type="hidden" class="bani_txnstatus" name="bani_txnstatus" value= ${i}/>`
          ),
          a.append(
            `<input  type="hidden" class="bani_txntype" name="bani_txntype" value= ${r}/>`
          ),
          a.append(
            `<input  type="hidden" class="bani_txnextref" name="bani_txnextref" value= ${u}/>`
          ),
          !l)
        )
          return !1;
        (n = !0),
          a.submit(),
          e("body").block({
            message: null,
            overlayCSS: { background: "#fff", opacity: 0.6 },
            css: { cursor: "wait" },
          });
      };
    return (
      baniPlugin.init({
        amount: o,
        phoneNumber: wc_bani_params?.phoneNumber,
        merchantKey: wc_bani_params?.merchantKey,
        ref: wc_bani_params?.txnref,
        email: wc_bani_params?.email,
        firstName: wc_bani_params?.firstName,
        lastName: wc_bani_params?.lastName,
        showUserName: wc_bani_params?.showUserName,
        showUserAccountName: wc_bani_params?.showUserAccountName,
        onClose: (n) => {
          e("#wc-bani-form").show(), e(this.el).unblock(), s(n);
        },
        metadata: wc_bani_params?.metadata,
        callback: s,
      }),
      !1
    );
  }
  e("#wc-bani-form").hide(),
    e("body").block({
      message: null,
      overlayCSS: { background: "#fff", opacity: 0.6 },
      css: { cursor: "wait" },
    }),
    t(),
    jQuery("#bani-payment-button").click(function () {
      return t("ONCLICK");
    }),
    jQuery("#bani_form form#order_review").submit(function () {
      return t("ON SUBMIT");
    });
});
